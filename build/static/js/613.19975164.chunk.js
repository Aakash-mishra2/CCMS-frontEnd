"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[613],{613:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var i=t(165),a=t(861),r=t(413),u=t(439),l=t(791),s=t(453),o=t(345),d=t(595),c=t(94),p=t(138),v=t(935),f=t(888),m=t(508),T=t(666),h=t(184);function E(){var e=(0,l.useContext)(v.V),n=(0,l.useState)(!0),t=(0,u.Z)(n,2),E=t[0],x=t[1],C=(0,m.E)(),y=C.isLoading,S=C.sendRequest,N=C.error,Z=C.clearError,V=(0,c.c)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),_=(0,u.Z)(V,3),b=_[0],g=_[1],I=_[2],O=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(t){var a,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!E){n.next=14;break}return n.prev=2,n.next=5,S("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL,"/public/login"),"POST",JSON.stringify({email:b.inputs.email.value,password:b.inputs.password.value}),{"Content-type":"application/json"});case 5:a=n.sent,console.log("login rq sent."),e.login(a.citizen.id),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:n.next=25;break;case 14:return n.prev=14,n.next=17,S("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL,"/public/signup"),"POST",JSON.stringify({email:b.inputs.email.value,password:b.inputs.password.value,name:b.inputs.name.value,idCardNo:b.inputs.idCardNo.value}),{"Content-type":"application/json"});case 17:r=n.sent,console.log("signup, req sent."),console.log(r.added),e.login(r.added.id),n.next=25;break;case 23:n.prev=23,n.t1=n.catch(14);case 25:case"end":return n.stop()}}),n,null,[[2,10],[14,23]])})));return function(e){return n.apply(this,arguments)}}();return(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(f.Z,{error:N,onClear:Z}),y&&(0,h.jsx)(T.Z,{asOverlay:!0}),(0,h.jsxs)(p.Z,{className:"authentication",children:[(0,h.jsxs)("form",{onSubmit:O,children:[!E&&(0,h.jsx)(o.Z,{element:"input",type:"text",id:"name",label:" Name: ",errorText:"Please enter valid Name. ",validators:[(0,d.hg)()],onInput:g}),(0,h.jsx)(o.Z,{element:"input",type:"text",id:"email",label:" Your Email: ",errorText:"Please enter a valid E-Mail input. ",validators:[(0,d.Ox)()],onInput:g}),!E&&(0,h.jsx)(o.Z,{element:"input",type:"number",id:"idCardNo",label:" Your Aadhar Number/VoterID Number :",errorText:"Enter a valid number of 12 digits",validators:[(0,d.CP)(12)],onInput:g}),(0,h.jsx)(o.Z,{element:"input",type:"password",id:"password",label:" Your Password: ",errorText:"Enter a valid Password of 6 digits or more.",validators:[(0,d.CP)(6)],onInput:g}),(0,h.jsx)(s.Z,{type:"submit",disabled:!b.isValid,children:E?"LOGIN":"SIGNUP"})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)(s.Z,{inverse:!0,onClick:function(){E?I((0,r.Z)((0,r.Z)({},b.inputs),{},{name:{value:" ",isValid:!1},idCardNo:{value:" ",isValid:!1}}),!1):I((0,r.Z)((0,r.Z)({},b.inputs),{},{name:void 0,idCardNo:void 0}),b.inputs.email.isValid&&b.inputs.password.isValid),x((function(e){return!e}))},children:["Switch to ",E?"SIGNUP":"LOGIN"]})]})]})}},345:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(439),a=t(413),r=t(791),u=t(595),l=t(184);function s(e,n){switch(n.type){case"ALTER":return(0,a.Z)((0,a.Z)({},e),{},{value:n.val,isValid:(0,u.Gu)(n.val,n.validators)});case"TOUCH":return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0});default:return e}}function o(e){var n=(0,r.useReducer)(s,{isValid:e.initialValid||!1,value:e.initialValue||"",isTouched:!1}),t=(0,i.Z)(n,2),a=t[0],u=t[1];function o(n){u({type:"ALTER",val:n.target.value,validators:e.validators})}function d(e){u({type:"TOUCH"})}var c=e.id,p=e.onInput,v=a.isValid,f=a.value;(0,r.useEffect)((function(){p(c,f,v)}),[c,v,f,p]);var m="input"===e.element?(0,l.jsx)("input",{type:e.type,placeholder:e.placeHolder,id:e.id,onChange:o,onBlur:d,value:a.value}):(0,l.jsx)("textarea",{type:e.type,placeholder:e.placeHolder,id:e.id,rows:e.rows||3,onChange:o,onBlur:d,value:a.value});return(0,l.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:e.id,children:e.label}),m,!a.isValid&&a.isTouched&&(0,l.jsx)("p",{children:e.errorText})]})}},94:function(e,n,t){t.d(n,{c:function(){return s}});var i=t(439),a=t(942),r=t(413),u=t(791),l=function(e,n){switch(n.type){case"INPUT_CHANGE":var t=!0;for(var i in e.inputs)if(i===n.inputId){if(!e.inputs[i])continue;t=t&&n.isValid}else t=t&&e.inputs[i].isValid;return(0,r.Z)((0,r.Z)({},e),{},{inputs:(0,r.Z)((0,r.Z)({},e.inputs),{},(0,a.Z)({},n.inputId,{value:n.value,isValid:n.isValid})),isValid:t});case"SET_DATA":return{inputs:n.inputs,isValid:n.formIsValid};default:return e}},s=function(e,n){var t=(0,u.useReducer)(l,{inputs:e,isValid:n}),a=(0,i.Z)(t,2),r=a[0],s=a[1];return[r,(0,u.useCallback)((function(e,n,t){s({type:"INPUT_CHANGE",value:n,isValid:t,inputId:e})}),[]),(0,u.useCallback)((function(e,n){s({type:"SET_DATA",inputs:e,formIsValid:n})}),[])]}},595:function(e,n,t){t.d(n,{CP:function(){return o},Gu:function(){return c},Ox:function(){return d},hg:function(){return s}});var i=t(762),a="REQUIRE",r="MINLENGTH",u="MAXLENGTH",l="EMAIL",s=function(){return{type:a}},o=function(e){return{type:r,val:e}},d=function(){return{type:l}},c=function(e,n){var t,s=!0,o=(0,i.Z)(n);try{for(o.s();!(t=o.n()).done;){var d=t.value;d.type===a&&(s=s&&e.trim().length>0),d.type===r&&(s=s&&e.trim().length>=d.val),d.type===u&&(s=s&&e.trim().length<=d.val),"MIN"===d.type&&(s=s&&+e>=d.val),"MAX"===d.type&&(s=s&&+e<=d.val),d.type===l&&(s=s&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){o.e(c)}finally{o.f()}return s}}}]);
//# sourceMappingURL=613.19975164.chunk.js.map